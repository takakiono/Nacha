<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.nacha.repository.dao.UserMapper">
  <!-- ユーザ情報の取得 -->
  <select id="select" resultType="com.example.nacha.repository.entity.UserEntity">
    select 
      mu.user_id
      ,mu.user_name
    from
      m_user mu
    inner join c_group_user cgu
      on mu.user_id = cgu.user_id
    where
      cgu.group_id = #{groupId}
  </select>

  <!-- ユーザー情報の登録 -->
  <insert id="regist"
    parameterType="java.util.List" useGeneratedKeys="true" keyProperty="userId">
    insert into 
        m_user(
            user_id
            , user_name
        ) 
    values
      <foreach collection="entities" item="entity" separator=",">
      (
        #{entity.userId}
        , #{entity.userName}
      )
      </foreach>
  </insert>
</mapper>